<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
	<title>Data Example</title>
</head>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom"></script>
<link rel="stylesheet" th:href="@{/css/dashboard.css}">
<link rel="stylesheet" th:href="@{/css/serverBoard.css}">
<link rel="stylesheet" th:href="@{/css/history.css}">
<script th:src="@{/js/index.js}" defer></script>
<script th:src="@{/js/serverTable.js}" defer></script>
<script th:src="@{/js/chart.js}" defer></script>
<script>


</script>
<body>
	<div id="container">
		<div id="header">
			<h1>서버 정보 목록</h1>
			<div id='header-info'>
				<div id='cpuUsage'>CPU</div>
				<div id='memoryUsage'>Memory</div>
				<div id='diskUsage'>Disk</div>
			</div>
		</div>
		<div id="serverTableBody">
			<div th:replace="~{fragments/serverTableBody :: serverTableBody}">
			</div>

		</div>
		<div id="historyBody">
			<div id="historyContainer" th:if="${serverHistory}!=null">
				<div id="historyHeader">
					<h2 th:text="${serverHistory.serverIp} + ' 히스토리'">히스토리</h2>
					<button th:onclick="|closeHistory()|" class="danBtn" id="exitHistory">X</button>
				</div>
				<div id="menu">
					<!-- CPU usage display -->
					<div id="historyCpu">
						<div class="menuHeader">CPU</div>
						<div class="usage"
						     th:text="${serverHistory.metricLogs.cpuUsage} + '%'">0%
						</div>
					</div>
					<!-- Memory usage display -->
					<div id="historyMemory">
						<div class="menuHeader">Memory</div>
						<div class="usage"
						     th:text="${serverHistory.metricLogs.memoryUsage} + '%'">0%
						</div>
						<div>
							<span
								th:text="${#numbers.formatDecimal((serverHistory.memoryTotal
								*(serverHistory.metricLogs.memoryUsage/100)) / 1000.0, 1,2)} + 'GB /'">0.0</span>
							<span
								th:text="${#numbers.formatDecimal(serverHistory.memoryTotal / 1000.0, 1,2)} + 'GB'">0.0</span>
						</div>
					</div>
					<div th:if="${serverHistory.metricLogs.diskUsage1 != null}" id="historyDisk1">
						<div class="menuHeader">Disk 1</div>
						<div class="usage"
						     th:text="${serverHistory.metricLogs.diskUsage1} + '%'">0%
						</div>
						<div>
							<span th:text="${#numbers.formatDecimal((serverHistory.metricLogs.diskTotal1 * (serverHistory.metricLogs.diskUsage1 / 100)) / 1000.0, 1, 1)} + 'GB / '">0.0</span>
							<span th:text="${#numbers.formatDecimal(serverHistory.metricLogs.diskTotal1 / 1000.0, 1, 2)} + 'GB'">0.0</span>
						</div>
					</div>

					<!-- 디스크 2 -->
					<div th:if="${serverHistory.metricLogs.diskUsage2 != null}" id="historyDisk2">
						<div class="menuHeader">Disk 2</div>
						<div class="usage"
						     th:text="${serverHistory.metricLogs.diskUsage2} + '%'">0%
						</div>
						<div>
							<span th:text="${#numbers.formatDecimal((serverHistory.metricLogs.diskTotal2 * (serverHistory.metricLogs.diskUsage2 / 100)) / 1000.0, 1, 1)} + 'GB / '">0.0</span>
							<span th:text="${#numbers.formatDecimal(serverHistory.metricLogs.diskTotal2 / 1000.0, 1, 2)} + 'GB'">0.0</span>
						</div>
					</div>

					<!-- 디스크 3 -->
					<div th:if="${serverHistory.metricLogs.diskUsage3 != null}" id="historyDisk3">
						<div class="menuHeader">Disk 3</div>
						<div class="usage"
						     th:text="${serverHistory.metricLogs.diskUsage3} + '%'">0%
						</div>
						<div>
							<span th:text="${#numbers.formatDecimal((serverHistory.metricLogs.diskTotal3 * (serverHistory.metricLogs.diskUsage3 / 100)) / 1000.0, 1, 1)} + 'GB / '">0.0</span>
							<span th:text="${#numbers.formatDecimal(serverHistory.metricLogs.diskTotal3 / 1000.0, 1, 2)} + 'GB'">0.0</span>
						</div>
					</div>

					<!-- 디스크 4 -->
					<div th:if="${serverHistory.metricLogs.diskUsage4 != null}" id="historyDisk4">
						<div class="menuHeader">Disk 4</div>
						<div class="usage"
						     th:text="${serverHistory.metricLogs.diskUsage4} + '%'">0%
						</div>
						<div>
							<span th:text="${#numbers.formatDecimal((serverHistory.metricLogs.diskTotal4 * (serverHistory.metricLogs.diskUsage4 / 100)) / 1000.0, 1, 1)} + 'GB / '">0.0</span>
							<span th:text="${#numbers.formatDecimal(serverHistory.metricLogs.diskTotal4 / 1000.0, 1, 2)} + 'GB'">0.0</span>
						</div>
					</div>
				</div>
				<div id="chart">
					<canvas id="myChart" style="width: 800px"></canvas>
				</div>
			</div>
			<!--			<div id="historyContainer" th:replace="~{fragments/history :: historyContainer}"-->
			<!--			     th:style="'display: none;'">-->
			<!--			</div>-->
		</div>
	</div>
</body>
</html>